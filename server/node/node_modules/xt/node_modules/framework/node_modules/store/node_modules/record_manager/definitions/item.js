
// require some core modules
var UTIL    = require("util");
var PATH    = require("path");

// load into module namespace from above
require("tools");
require("exception");
require("store");

// load into module namespace from level
require("record");

XT.Item = XT.Record.extend({

  definition: {

    // sproutcore record equivalent
    sctype: "XT.Item",

    // postgres table
    table: "item",

    // postgres schema
    schema: "public",

    // postgres sequence for guid/id
    sequence: "item_item_id_seq",

    // fields as columns
    fields: {
      
      //....................................
      // sproutcore fields

      guid:               "item_id",

      number:             "item_number",

      isActive:           "item_active",

      description1:       "item_descrip1",

      description2:       "item_descrip2",

      isPicklist:         "item_picklist",

      notes:              "item_comments",

      isSold:             "item_sold",

      isFractional:       "item_fractional",

      type:               "item_type",

      productWeight:      "item_prodweight",

      packageWeight:      "item_packweight",

      isExclusive:        "item_exclusive",

      listPrice:          "item_listprice",

      isConfigured:       "item_config",

      extraDescription:   "item_extdescrip",

      barcode:            "item_upccode",

      warrantydays:       "item_warrdays",

      classCode:          "item_classcode_id",

      inventoryUom:       "item_inv_uom_id",

      productCategory:    "item_prodcat_id",

      priceUom:           "item_price_uom_id",

      freightclass:       "item_freightclass_id"

    },

    //....................................
    // toMany mappings
                              
    toMany: {

      comments:     XT.Record.toMany({
        self:     "XT.Item",
        relation: "XT.Comment",
        on:       "guid",
        to:       "source",
        static:   XT.Record.static({ "comment_source":"'I'" })
      }),

      itemSites:     XT.Record.toMany({
        self:     "XT.Item",
        relation: "XT.ItemSite",
        on:       "guid",
        to:       "item"
      })

    },

  }, // definition

  /** @private */
  xtClass: "XT.Item"

});

XT.Store.recordManager.emit("definitionLoaded", XT.Item);


// require some core modules
var UTIL    = require("util");
var PATH    = require("path");

// load into module namespace from above
require("tools");
require("exception");
require("store");
require("functor");

XT.SessionFunctor = XT.Functor.create({

  exec: function(xtResponse, username, password) {
    
    // blah blah would be doing some setup here but this is
    // just a placeholder!!!
    XT.puts("Request for Session for user => {0} and password => {1}".format(username, password));

    // generate a session id for ANYONE!!!!!! YEAH!
    var sid = this.generateSessionId();
    
    this.emit("action", xtResponse, username, sid); 
     
  },

  action: function(xtResponse, username, sid) {
    var json = {
      username: username,
      sid: sid
    };
    xtResponse.set("nonRecord").sendJson(json);
  },

  xtClass: "XT.SessionFunctor",

  generateSessionId: function() {
    
    // since this IS just a placeholder...it just fakes
    // it and returns a UUID lol
    return XT.Tools.crypto.uuid();
  }

});

process.emit("loadedFunctor", XT.SessionFunctor);

